<!DOCTYPE html>
<html lang="en">
<head><script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart House Price Predictor</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins',sans-serif;
}

body{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background: linear-gradient(-45deg, #1e3c72, #2a5298, #6a11cb, #2575fc);
    background-size:400% 400%;
    animation: gradientMove 10s ease infinite;
}

@keyframes gradientMove{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

.card{
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(15px);
    padding:40px;
    width:400px;
    border-radius:20px;
    box-shadow:0 8px 32px rgba(0,0,0,0.3);
    color:white;
}

.card h2{
    text-align:center;
    margin-bottom:20px;
    font-weight:700;
}

.input-group{
    margin-bottom:15px;
}

.input-group label{
    font-size:14px;
}

.input-group input{
    width:100%;
    padding:8px;
    margin-top:5px;
    border-radius:8px;
    border:none;
    outline:none;
}

button{
    width:100%;
    padding:12px;
    margin-top:15px;
    border:none;
    border-radius:10px;
    background:#00f2fe;
    background: linear-gradient(to right,#4facfe,#00f2fe);
    color:black;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

button:hover{
    transform:scale(1.05);
}

.result{
    margin-top:20px;
    text-align:center;
    font-size:18px;
    font-weight:500;
}
</style>
</head>

<body>

<div class="card">
    <h2>üè† House Price Predictor</h2>

    <div class="input-group">
        <label>Area (sq.ft)</label>
        <input type="number" id="area" placeholder="Enter area">
    </div>

    <div class="input-group">
        <label>Bedrooms</label>
        <input type="number" id="bedrooms" placeholder="Enter bedrooms">
    </div>

    <div class="input-group">
        <label>Bathrooms</label>
        <input type="number" id="bathrooms" placeholder="Enter bathrooms">
    </div>

    <div class="input-group">
        <label>Location Rating (1-5)</label>
        <input type="number" id="location" min="1" max="5" placeholder="Rate location">
    </div>

    <button onclick="predictPrice()">Predict Price</button>

    <div class="result" id="result"></div>
    <canvas id="priceChart" style="margin-top:20px;"></canvas>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
let chart;

async function predictPrice(){

    const resultDiv = document.getElementById("result");

    const area = Number(document.getElementById("area").value);
    const bedrooms = Number(document.getElementById("bedrooms").value);
    const bathrooms = Number(document.getElementById("bathrooms").value);
    const location = Number(document.getElementById("location").value);

    if(!area || !bedrooms || !bathrooms || !location){
        resultDiv.innerText = "‚ö† Please fill all fields";
        return;
    }

    resultDiv.innerText = "‚è≥ Calculating Price...";

    const response = await fetch("/predict", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({area, bedrooms, bathrooms, location})
    });

    const data = await response.json();

    animateValue(resultDiv, 0, data.predictedPrice, 1500);

    createChart(area, bedrooms, bathrooms, location);
}

function formatCurrency(num){
    return "‚Çπ " + Number(num).toLocaleString("en-IN");
}

function animateValue(element, start, end, duration){
    let startTime = null;

    function animation(currentTime){
        if(!startTime) startTime = currentTime;
        const progress = Math.min((currentTime - startTime)/duration,1);
        const value = Math.floor(progress * (end - start) + start);
        element.innerText = "Estimated Price: " + formatCurrency(value);

        if(progress < 1){
            requestAnimationFrame(animation);
        }
    }
    requestAnimationFrame(animation);
}

function createChart(area, bedrooms, bathrooms, location){

    const areaContribution = area * 3000;
    const bedroomContribution = bedrooms * 500000;
    const bathroomContribution = bathrooms * 300000;
    const locationContribution = location * 200000;

    const ctx = document.getElementById('priceChart').getContext('2d');

    if(chart) chart.destroy();

    chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Area', 'Bedrooms', 'Bathrooms', 'Location'],
            datasets: [{
                label: 'Price Contribution (‚Çπ)',
                data: [
                    areaContribution,
                    bedroomContribution,
                    bathroomContribution,
                    locationContribution
                ],
                backgroundColor: [
                    '#4facfe',
                    '#00f2fe',
                    '#6a11cb',
                    '#2575fc'
                ]
            }]
        }
    });
}
</script>




</body>
</html>
